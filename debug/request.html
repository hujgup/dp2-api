<script>
/*
var json = {
	"authent": {
		"username": "feferi",
		"password": "0413"
	},
	"requests": [
		{
			"type": "add",
			"records": [
				{
					"product": 6,
					"quantity": 1,
					"dateTime": "20170909T123344Z"
				},
				{
					"product": 1,
					"quantity": 8,
					"dateTime": "20160618T210007Z"
				}
			]
		}
	]
};
var json = {
	"authent": {
		"username": "feferi",
		"password": "0413"
	},
	"requests": [
		{
			"type": "retrieve",
			"filter": {
				"type": "logicOr",
				"children": [
					{
						"type": "column",
						"name": "product",
						"value": 2
					},
					{
						"type": "column",
						"name": "product",
						"value": 4
					}
				]
			}
		}
	]
};
var json = {
	"authent": {
		"username": "feferi",
		"password": "0413"
	},
	"requests": [
		{
			"type": "edit",
			"updateTo": {
				"quantity": 12
			},
			"filter": {
				"type": "column",
				"name": "product",
				"value": 1
			}
		}
	]
};
*/
var json = {
	"authent": {
		"username": "feferi",
		"password": "0413"
	},
	"requests": [
		{
			"type": "trendline",
			"fit": "linear",
			"y": "revenue",
			"cumulative": false,
			"filter": {
				"type": "column",
				"name": "dateTime",
				"inRange": {
					"low": "20500101T000000Z",
					"lowInclusive": true,
					"high": "30000101T000000Z",
					"highInclusive": false
				}
			}
		}
	]
};

var req = new XMLHttpRequest();
req.open("POST","../api/",true);
req.onreadystatechange = function() {
	if (req.readyState === 4) {
		console.log(req);
		document.body.innerHTML = req.responseText;
	}
};
req.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
req.send("request="+encodeURIComponent(JSON.stringify(json)));
</script>

